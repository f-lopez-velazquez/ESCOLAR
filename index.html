<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#1976d2" />
  <title>Control Escolar</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="styles.css" />
  <script type="module" src="app.js"></script>
</head>
<body>
  <header>
    <h1>Control Escolar</h1>
    <div id="user-info"></div>
    <button id="logout-btn" style="display: none;">Cerrar sesión</button>
  </header>

  <main id="main-content">
    <!-- Vista admin/alumno se carga según el usuario -->
  </main>

  <template id="login-template">
    <section class="login">
      <h2>Iniciar sesión</h2>
      <input type="email" id="email" placeholder="Correo" required />
      <input type="password" id="password" placeholder="Contraseña" required />
      <button id="login-btn">Entrar</button>
      <p class="note">Sólo el admin puede editar. Otros usuarios solo pueden ver.</p>
    </section>
  </template>

  <template id="admin-template">
    <section id="materias-panel">
      <h2>Materias</h2>
      <ul id="materias-list"></ul>
      <button id="nueva-materia-btn">+ Nueva materia</button>
    </section>

    <section id="detalle-materia" style="display:none">
      <h2 id="materia-nombre"></h2>
      <div class="tabs">
        <button class="tab-btn" data-tab="rubros">Rubros</button>
        <button class="tab-btn" data-tab="alumnos">Alumnos</button>
        <button class="tab-btn" data-tab="equipos">Equipos</button>
        <button class="tab-btn" data-tab="evaluacion">Evaluación</button>
        <button class="tab-btn" data-tab="pdf">Exportar PDF</button>
      </div>
      <div id="tab-content"></div>
    </section>
  </template>

  <template id="alumno-template">
    <section id="vista-publica">
      <h2>Consulta de Materias</h2>
      <ul id="materias-publicas"></ul>
    </section>
    <section id="detalle-publico" style="display: none">
      <h2 id="materia-publica-nombre"></h2>
      <div id="contenido-publico"></div>
    </section>
  </template>

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker
          .register('service-worker.js')
          .catch(err => console.error('SW error', err));
      });
    }
  </script>
</body>
</html>
